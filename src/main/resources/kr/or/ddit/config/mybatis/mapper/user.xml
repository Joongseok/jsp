<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">


	<insert id="insertUser" parameterType="userVo">
		INSERT INTO USERS
		(
			 USERID
			,NAME
			,ALIAS
			,PASS
			,ADDR1
			,ADDR2
			,ZIPCD
			,BIRTH
			,PATH
			,FILENAME
		)
		VALUES
		(
			 #{userId}
			,#{name}
			,#{alias}
			,#{pass}
			,#{addr1}
			,#{addr2}
			,#{zipcd}
			,#{birth}
			,#{path}
			,#{filename}
		)
	</insert>


	<!-- 전체 사용자 리스트 조회 -->
	<select id="userList" resultType="userVo">
		SELECT *
		FROM USERS
		ORDER BY USERID
	</select>
	
	<!-- 특정 사용자 조회 -->
	<select id="getUser" resultType="userVo" parameterType="string">
		SELECT *
		FROM USERS
		WHERE USERID = #{userId}
	</select>
	
	<!-- 사용자 페이지 리스트 조회 -->
	<!-- pageVo int page, int pageSize -->
	<select id="userPagingList" parameterType="pageVo" resultType="userVo">
		<![CDATA[
			SELECT *
			FROM
				(SELECT A.*, ROWNUM RN
				FROM
					(SELECT A.*
					FROM  USERS A
					ORDER BY USERID) A)
			WHERE RN >= (#{page} - 1) * #{pageSize} + 1
			AND   RN <=  #{page} * #{pageSize}
		]]>
	</select>
	
	<!-- 사용자 전체수 조회 -->
	<select id="usersCnt" resultType="int">
		SELECT COUNT(*)
		FROM USERS
	</select>
	
	<delete id="deleteUser" parameterType="string">
		DELETE USERS
		WHERE USERID = #{userId}
	</delete>
	
	<update id="updateDateUser" parameterType="userVo" >
		UPDATE USERS
		SET  NAME	  = #{name}   	
			,ALIAS    = #{alias}     
			,PASS     = #{pass}     			
			,ADDR1    = #{addr1}    			
			,ADDR2    = #{addr2}    			
			,ZIPCD    = #{zipcd}    			
			,BIRTH    = #{birth}    			
			,PATH     = #{path}     			
			,FILENAME = #{filename} 	
		WHERE USERID = #{userId}		
	</update>            			
	                    			
</mapper>